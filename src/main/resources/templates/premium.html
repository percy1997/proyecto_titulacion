<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Plan Premium</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .premium-card {
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .premium-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
        }
        .btn-premium {
            background: linear-gradient(135deg, #f6d365, #fda085);
            border: none;
            color: #fff;
            font-weight: bold;
        }
        .btn-premium:hover {
            opacity: 0.9;
        }
    </style>
</head>
<body class="bg-light">

	<!-- NAVBAR -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm sticky-top">
	    <div class="container">
	        <a class="navbar-brand fw-bold" href="/dev/index">üõ°Ô∏è CiberSafe</a>
	        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
	            <span class="navbar-toggler-icon"></span>
	        </button>
	        <div class="collapse navbar-collapse" id="navbarNav">
	            <ul class="navbar-nav ms-auto align-items-center">
					<li sec:authorize="hasRole('Usuario')" class="nav-item"><a class="nav-link active" href="/user/misCasosRegistrados">Mis casos registrados</a></li>
	                <li class="nav-item"><a class="nav-link" href="#">Documentos</a></li>
					<li class="nav-item"><a class="nav-link" href="/dev/estadisticas">Reportes Estad√≠sticos</a></li>
	                <li class="nav-item"><a class="nav-link" href="/est/listado">Casos</a></li>
					<li class="nav-item"><a class="nav-link" href="/dev/guias">Denuncias</a></li>
					<li sec:authorize="isAnonymous()" class="nav-item ms-3"><a href="/user/registrarse" class="btn btn-primary btn-sm">Registrarse</a></li>
					<li sec:authorize="isAnonymous()" class="nav-item ms-2"><a href="/login" class="btn btn-success btn-sm">Login</a></li>
					<li sec:authorize="isAuthenticated()" class="nav-item ms-2"><a href="/logout" class="btn btn-danger btn-sm">Cerrar sesi√≥n</a></li>
					<li sec:authorize="hasRole('Usuario')" class="nav-item ms-2"><a href="/dev/premium" class="btn btn-warning btn-sm ">Mejora a Premium</a></li>
	            </ul>            
			</div>
	    </div>
	</nav>
<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="fw-bold text-primary">¬°Hazte Premium!</h1>
        <p class="text-muted fs-5">Env√≠a m√°s casos a la DIVINDAT, desbloquea acceso completo a todos los casos y m√°s.</p>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card premium-card p-4 text-center bg-white">
                <h3 class="fw-bold mb-3">Plan Premium</h3>
                <p class="text-muted mb-4">Acceso completo a todas las funciones y casos disponibles.</p>
                
                <ul class="list-group list-group-flush text-start mb-4">
					<li class="list-group-item"><i class="bi bi-check-circle-fill text-success me-2"></i>Obt√©n 5 oportunidades sin l√≠mite de tiempo para enviar caso a DIVINDAT</li>
					<li class="list-group-item"><i class="bi bi-check-circle-fill text-success me-2"></i>Ver todos los casos sin l√≠mite</li>
                    <li class="list-group-item"><i class="bi bi-check-circle-fill text-success me-2"></i>Filtros avanzados de b√∫squeda</li>
                    <li class="list-group-item"><i class="bi bi-check-circle-fill text-success me-2"></i>Acceso a todas las estad√≠sticas del sistema</li>
				</ul>

                <a href="/premium/activar" class="btn btn-lg btn-premium w-100" data-bs-toggle="modal" data-bs-target="#modalPagoPremium">Activar Premium</a>
            </div>
        </div>
    </div>
</div>

<!-- MODAL DE PAGO PREMIUM -->
<div class="modal fade" id="modalPagoPremium" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <!-- Header -->
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title fw-bold">Confirmar Pago - Plan Premium</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <!-- Body -->
            <div class="modal-body">

                <div class="mb-3">
                    <label class="form-label fw-bold">N√∫mero de Tarjeta</label>
                    <input type="text" id="numeroCuenta" class="form-control" maxlength="16" placeholder="1111222233334444">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Nombre del Titular</label>
                    <input type="text" id="nombreTitular" class="form-control" placeholder="Juan P√©rez">
                </div>

                <div class="row">
                    <div class="col-6 mb-3">
                        <label class="form-label fw-bold">Fecha de Vencimiento</label>
                        <input type="text" id="fechaVencimiento" class="form-control" maxlength="5" placeholder="12/29">
                    </div>
                    <div class="col-6 mb-3">
                        <label class="form-label fw-bold">CVV</label>
                        <input type="password" id="cvv" maxlength="4" class="form-control" placeholder="123">
                    </div>
                </div>

            </div>

            <!-- Footer -->
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button id="btnConfirmarPago" class="btn btn-warning fw-bold">Pagar S/ 10.00</button>
            </div>

        </div>
    </div>
</div>

<script>
document.getElementById("btnConfirmarPago").addEventListener("click", function () {

    const data = {
        numeroCuenta: document.getElementById("numeroCuenta").value,
        nombreTitular: document.getElementById("nombreTitular").value,
        fechaVencimiento: document.getElementById("fechaVencimiento").value,
        cvv: document.getElementById("cvv").value
    };

    fetch("/user/premium/procesarPago", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(r => {

        if (r.estado === "OK") {
            alert("Pago realizado con √©xito. ¬°Ya eres usuario Premium!");
            window.location.href = "/dev/index";
        } else {
            alert("Error: " + r.mensaje);
        }
    })
    .catch(err => console.error(err));
});
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</body>
</html>